[2021/06/27 03:46:01.509 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:46:01.509 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:46:01.509 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624779961509911623,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:46:01.520 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:46:01.521 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=304.072µs] []
[2021/06/27 03:46:01.521 -04:00] [ERROR] [lightning.go:311] ["restore failed"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/1694847_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/fa74321_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"]
[2021/06/27 03:46:01.521 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/1694847_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/fa74321_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"] [errorVerbose="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/1694847_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/fa74321_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again\ngithub.com/pingcap/br/pkg/lightning/restore.verifyCheckpoint\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:710\ngithub.com/pingcap/br/pkg/lightning/restore.NewRestoreControllerWithPauser\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:212\ngithub.com/pingcap/br/pkg/lightning/restore.NewRestoreController\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:187\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).run\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:309\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:192\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 03:46:01.521 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/1694847_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/fa74321_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"]
[2021/06/27 03:46:15.435 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:46:15.435 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:46:15.435 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624779975435737779,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:46:15.442 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:46:15.442 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=203.296µs] []
[2021/06/27 03:46:15.442 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 03:46:15.444 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:46:15.444 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:46:15.521 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:46:15.521 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:46:15.522 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=23.548µs]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=39.253µs] []
[2021/06/27 03:46:15.522 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:46:15.522 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 03:46:15.522 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:1597] ["encode kv data and write failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=1.862331ms] [error="unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:1429] ["restore engine failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=1.944588ms] [error="unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:1452] ["import whole table failed"] [table=`jan`.`risk_factor`] [takeTime=2.061867ms] [error="unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:1127] ["restore table failed"] [table=`jan`.`risk_factor`] [takeTime=2.334857ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:1272] ["restore all tables data failed"] [takeTime=2.737084ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=80.006883ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:123] ["tables failed to be imported"] [count=1]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [restore.go:125] [-] [table=`jan`.`risk_factor`] [status=written] [error="unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"] [errorVerbose="unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).parseColumnPermutations\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2207\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).initializeColumns\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2176\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).encodeLoop\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2539\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).restore\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2638\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).restoreEngine.func1\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1568\nruntime.goexit\n\truntime/asm_amd64.s:1357\nrestore table `jan`.`risk_factor` failed"]
[2021/06/27 03:46:15.524 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [6605072020540198001127 511130197612253815 200128765421 200128765421 西藏海诚利工程机械设备租赁有限公司 西藏海诚利工程机械设备租赁有限公司 511130197612253815 06  511130197612253815-01 0 西藏海诚利工程机械设备租赁有限公司 54000000 54019900 54019800 03 9d 3. -9999 uk 343000.0000 .0000  sqabcd0232 -9999.0000 -9999. sqa0 sqa0cg 005 0 0 0507 20200320 20200321 20210321 .700000 1.000000 1513.8868 2063.2100 1189.485742 952.0600 928.2774 82.5284 2292.4571 0 100.0000 001002003006000 t 2111 uk 04 20190402 309043.0000 1000000.0000 .0000 藏af2760 21 t20 b 1 n1 .0000 0 d2 9999999 45 -9999 -9999 0 04 uk .00        1.000000 122000.0000 20210501 2063.2100 99 2430.0000 0 309043.0000 210,300 001002003000 1 6605122020540198000017 03 0 20210430 211100 2430.0000     2430.0000   uk  -9999.000000 2 .0000 0 .0000 1 0 -9999.  0 100000.0000 200000.0000 6605072020540198001127 交强险 .0000       ]"]
[2021/06/27 03:50:07.799 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:50:07.799 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:50:07.799 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780207799969827,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:50:07.807 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:50:07.807 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=266.284µs] []
[2021/06/27 03:50:07.810 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:50:07.810 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:50:07.876 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:50:07.876 -04:00] [ERROR] [restore.go:1169] ["TiDB Lightning has failed last time. To prevent data loss, this run will stop now. Please resolve errors first"] [count=1]
[2021/06/27 03:50:07.876 -04:00] [INFO] [restore.go:1188] [-] [table=`jan`.`risk_factor`] [status=6] [failedStep=written] [recommendedAction="./tidb-lightning-ctl --checkpoint-error-destroy='`jan`.`risk_factor`' --config=..."]
[2021/06/27 03:50:07.876 -04:00] [INFO] [restore.go:1196] ["You may also run `./tidb-lightning-ctl --checkpoint-error-destroy=all --config=...` to start from scratch"]
[2021/06/27 03:50:07.876 -04:00] [INFO] [restore.go:1197] ["For details of this failure, read the log file from the PREVIOUS run"]
[2021/06/27 03:50:07.876 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:07.876 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=65.856651ms] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:07.876 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:50:07.876 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="TiDB Lightning has failed last time; please resolve these errors first"] [errorVerbose="TiDB Lightning has failed last time; please resolve these errors first\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).restoreTables\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1199\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).Run\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:318\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).run\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:316\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:192\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 03:50:07.876 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:17.480 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:50:17.480 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:50:17.480 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780217480470676,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:50:17.486 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:50:17.486 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=240.576µs] []
[2021/06/27 03:50:17.486 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 03:50:17.488 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:50:17.488 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:50:17.552 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:50:17.552 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:17.552 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:17.552 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=26.078µs]
[2021/06/27 03:50:17.552 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=44.504µs] []
[2021/06/27 03:50:17.552 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:50:17.552 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:17.553 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:50:17.553 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:50:17.553 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:50:17.553 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 03:50:17.553 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:1597] ["encode kv data and write failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=1.310573ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:1429] ["restore engine failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=1.431252ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:1452] ["import whole table failed"] [table=`jan`.`risk_factor`] [takeTime=1.678037ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:1127] ["restore table failed"] [table=`jan`.`risk_factor`] [takeTime=1.94758ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:1272] ["restore all tables data failed"] [takeTime=2.25585ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.554 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:50:17.555 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=66.157409ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.555 -04:00] [ERROR] [restore.go:123] ["tables failed to be imported"] [count=1]
[2021/06/27 03:50:17.555 -04:00] [ERROR] [restore.go:125] [-] [table=`jan`.`risk_factor`] [status=written] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:17.555 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"] [errorVerbose="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).parseColumnPermutations\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2207\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).initializeColumns\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2176\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).encodeLoop\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2539\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).restore\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2638\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).restoreEngine.func1\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1568\nruntime.goexit\n\truntime/asm_amd64.s:1357\nrestore table `jan`.`risk_factor` failed"]
[2021/06/27 03:50:17.555 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:43.652 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:50:43.652 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:50:43.652 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780243652801495,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:50:43.659 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:50:43.659 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=237.289µs] []
[2021/06/27 03:50:43.662 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:50:43.662 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:50:43.736 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:50:43.736 -04:00] [ERROR] [restore.go:1169] ["TiDB Lightning has failed last time. To prevent data loss, this run will stop now. Please resolve errors first"] [count=1]
[2021/06/27 03:50:43.736 -04:00] [INFO] [restore.go:1188] [-] [table=`jan`.`risk_factor`] [status=6] [failedStep=written] [recommendedAction="./tidb-lightning-ctl --checkpoint-error-destroy='`jan`.`risk_factor`' --config=..."]
[2021/06/27 03:50:43.736 -04:00] [INFO] [restore.go:1196] ["You may also run `./tidb-lightning-ctl --checkpoint-error-destroy=all --config=...` to start from scratch"]
[2021/06/27 03:50:43.736 -04:00] [INFO] [restore.go:1197] ["For details of this failure, read the log file from the PREVIOUS run"]
[2021/06/27 03:50:43.736 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:43.736 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=73.79126ms] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:43.736 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:50:43.736 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="TiDB Lightning has failed last time; please resolve these errors first"] [errorVerbose="TiDB Lightning has failed last time; please resolve these errors first\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).restoreTables\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1199\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).Run\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:318\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).run\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:316\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:192\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 03:50:43.736 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:50:50.736 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:50:50.736 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:50:50.736 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780250736725367,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":true,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:50:50.742 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:50:50.742 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=327.807µs] []
[2021/06/27 03:50:50.742 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 03:50:50.744 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:50:50.744 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:50:50.816 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:50:50.816 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:50.816 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:50.816 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=98.253µs]
[2021/06/27 03:50:50.816 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=120.07µs] []
[2021/06/27 03:50:50.817 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:50:50.817 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:50:50.817 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:50:50.817 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:50:50.817 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:50:50.817 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 03:50:50.819 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:1597] ["encode kv data and write failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=2.838579ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:1429] ["restore engine failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=2.887952ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:1452] ["import whole table failed"] [table=`jan`.`risk_factor`] [takeTime=2.936356ms] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:1127] ["restore table failed"] [table=`jan`.`risk_factor`] [takeTime=3.303299ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:1272] ["restore all tables data failed"] [takeTime=3.535432ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=75.518944ms] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:123] ["tables failed to be imported"] [count=1]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [restore.go:125] [-] [table=`jan`.`risk_factor`] [status=written] [error="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"] [errorVerbose="unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).parseColumnPermutations\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2207\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).initializeColumns\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2176\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).encodeLoop\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2539\ngithub.com/pingcap/br/pkg/lightning/restore.(*chunkRestore).restore\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:2638\ngithub.com/pingcap/br/pkg/lightning/restore.(*TableRestore).restoreEngine.func1\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1568\nruntime.goexit\n\truntime/asm_amd64.s:1357\nrestore table `jan`.`risk_factor` failed"]
[2021/06/27 03:50:50.820 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="restore table `jan`.`risk_factor` failed: unknown columns in header [805072019548197005105 540122198904065110 100145398834 100145398834 次仁达杰 次仁达杰 540122198904065110 08  540122198904065110-01 0 次仁达杰 54000000 54990000 54819700 03 8d 2. 34 m 85000.0000 1.4950 2565.0000 jldaod0129 -9999.0000 -9999. jld0 jld0bb 005 0 0 0507 20190909 20190910 20200909 1.000000 1.000000 1200.0000 1132.0800 586.649011 473.1800 592.1800 45.2832 1132.0800 0 100.0000  h 1400 uk 04 20180912    藏a1c882 14 h0 b 1 nf002 .0000 1 d2 9999998    0 04  .00        1.000000 122000.0000 20191001 1132.0800 99 1200.0000 0 .0000  000000000000 1  03 0 20190930 140001 1200.0000     1200.0000    uk -9999.000000 1 4060.0000 0 .0000 uk 1   0   805072019548197005105 01 .0000       ]"]
[2021/06/27 03:57:49.062 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:57:49.062 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:57:49.062 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780669062575658,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:57:49.068 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:57:49.068 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=286.827µs] []
[2021/06/27 03:57:49.071 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:57:49.071 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:57:49.559 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:57:49.559 -04:00] [ERROR] [restore.go:1169] ["TiDB Lightning has failed last time. To prevent data loss, this run will stop now. Please resolve errors first"] [count=1]
[2021/06/27 03:57:49.559 -04:00] [INFO] [restore.go:1188] [-] [table=`jan`.`risk_factor`] [status=6] [failedStep=written] [recommendedAction="./tidb-lightning-ctl --checkpoint-error-destroy='`jan`.`risk_factor`' --config=..."]
[2021/06/27 03:57:49.559 -04:00] [INFO] [restore.go:1196] ["You may also run `./tidb-lightning-ctl --checkpoint-error-destroy=all --config=...` to start from scratch"]
[2021/06/27 03:57:49.559 -04:00] [INFO] [restore.go:1197] ["For details of this failure, read the log file from the PREVIOUS run"]
[2021/06/27 03:57:49.559 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:57:49.559 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:57:49.559 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=488.753382ms] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:57:49.559 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="TiDB Lightning has failed last time; please resolve these errors first"] [errorVerbose="TiDB Lightning has failed last time; please resolve these errors first\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).restoreTables\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:1199\ngithub.com/pingcap/br/pkg/lightning/restore.(*Controller).Run\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:318\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).run\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:316\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:192\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 03:57:49.560 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="TiDB Lightning has failed last time; please resolve these errors first"]
[2021/06/27 03:57:57.105 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:57:57.106 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:57:57.106 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780677106135102,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:57:57.111 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:57:57.112 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=278.962µs] []
[2021/06/27 03:57:57.112 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 03:57:57.113 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:57:57.114 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:57:57.202 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=50.569µs]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=86.123µs] []
[2021/06/27 03:57:57.202 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:57:57.202 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:57:57.202 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:57:57.203 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 03:57:57.203 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 03:57:57.515 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0] [readDur=1.878614ms] [encodeDur=772.671µs] [deliverDur=309.110077ms] [checksum="{cksum=0,size=103667,kvs=100}"] [takeTime=312.143909ms] []
[2021/06/27 03:57:57.529 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0] [readDur=1.800491ms] [encodeDur=790.174µs] [deliverDur=322.795556ms] [checksum="{cksum=0,size=103147,kvs=100}"] [takeTime=325.656286ms] []
[2021/06/27 03:57:57.529 -04:00] [INFO] [restore.go:1597] ["encode kv data and write completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [read=0] [written=206814] [takeTime=326.363252ms] []
[2021/06/27 03:57:57.529 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:57:57.529 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=511.617µs] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [restore.go:1429] ["restore engine completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=327.326486ms] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0] [takeTime=1.288µs] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=345ns] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=720.082µs] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [restore.go:1452] ["import whole table completed"] [table=`jan`.`risk_factor`] [takeTime=328.13219ms] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=150ns] []
[2021/06/27 03:57:57.530 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0]
[2021/06/27 03:57:57.530 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0] [takeTime=183ns] []
[2021/06/27 03:57:57.531 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:57:57.531 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=301ns] []
[2021/06/27 03:57:57.531 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=566.782µs] []
[2021/06/27 03:57:57.532 -04:00] [INFO] [tidb.go:366] ["alter table auto_increment start"] [table=`jan`.`risk_factor`] [auto_increment=1]
[2021/06/27 03:57:57.769 -04:00] [INFO] [tidb.go:368] ["alter table auto_increment completed"] [table=`jan`.`risk_factor`] [auto_increment=1] [takeTime=237.172428ms] []
[2021/06/27 03:57:57.770 -04:00] [INFO] [restore.go:1734] ["skip checksum"] [table=`jan`.`risk_factor`]
[2021/06/27 03:57:57.770 -04:00] [INFO] [restore.go:1772] ["skip analyze"] [table=`jan`.`risk_factor`]
[2021/06/27 03:57:57.770 -04:00] [INFO] [restore.go:1127] ["restore table completed"] [table=`jan`.`risk_factor`] [takeTime=568.127447ms] []
[2021/06/27 03:57:57.770 -04:00] [INFO] [restore.go:1272] ["restore all tables data completed"] [takeTime=568.5062ms] []
[2021/06/27 03:57:57.770 -04:00] [INFO] [restore.go:1800] ["skip full compaction"]
[2021/06/27 03:57:57.771 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:57:57.829 -04:00] [INFO] [restore.go:1985] ["clean checkpoints start"] [keepAfterSuccess=false] [taskID=1624780677106135102]
[2021/06/27 03:57:57.829 -04:00] [INFO] [restore.go:1992] ["clean checkpoints completed"] [keepAfterSuccess=false] [taskID=1624780677106135102] [takeTime=59.851µs] []
[2021/06/27 03:57:57.829 -04:00] [INFO] [restore.go:342] ["the whole procedure completed"] [takeTime=715.738499ms] []
[2021/06/27 03:57:57.829 -04:00] [INFO] [main.go:94] ["tidb lightning exit"]
[2021/06/27 03:58:47.613 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 03:58:47.613 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 03:58:47.613 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624780727613315042,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/1694847_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 03:58:47.619 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 03:58:47.620 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=225.426µs] []
[2021/06/27 03:58:47.620 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 03:58:47.622 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 03:58:47.622 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:58:47.764 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=37.054µs]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=54.923µs] []
[2021/06/27 03:58:47.764 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:58:47.764 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 03:58:47.765 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:58:47.765 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 03:58:47.765 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 03:58:47.908 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0] [readDur=1.191304ms] [encodeDur=558.5µs] [deliverDur=141.312714ms] [checksum="{cksum=0,size=103147,kvs=100}"] [takeTime=143.263005ms] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0] [readDur=1.118978ms] [encodeDur=874.138µs] [deliverDur=142.564554ms] [checksum="{cksum=0,size=103667,kvs=100}"] [takeTime=144.977622ms] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:1597] ["encode kv data and write completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [read=0] [written=206814] [takeTime=145.428018ms] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=1.048µs] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:1429] ["restore engine completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=145.502167ms] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0] [takeTime=1.41µs] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=257ns] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=141.737µs] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:1452] ["import whole table completed"] [table=`jan`.`risk_factor`] [takeTime=145.773158ms] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=313ns] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0] [takeTime=608ns] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 03:58:47.910 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=143ns] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=29.735µs] []
[2021/06/27 03:58:47.910 -04:00] [INFO] [tidb.go:366] ["alter table auto_increment start"] [table=`jan`.`risk_factor`] [auto_increment=1]
[2021/06/27 03:58:48.060 -04:00] [INFO] [tidb.go:368] ["alter table auto_increment completed"] [table=`jan`.`risk_factor`] [auto_increment=1] [takeTime=149.910632ms] []
[2021/06/27 03:58:48.060 -04:00] [INFO] [restore.go:1734] ["skip checksum"] [table=`jan`.`risk_factor`]
[2021/06/27 03:58:48.060 -04:00] [INFO] [restore.go:1772] ["skip analyze"] [table=`jan`.`risk_factor`]
[2021/06/27 03:58:48.061 -04:00] [INFO] [restore.go:1127] ["restore table completed"] [table=`jan`.`risk_factor`] [takeTime=296.432724ms] []
[2021/06/27 03:58:48.061 -04:00] [INFO] [restore.go:1272] ["restore all tables data completed"] [takeTime=296.651211ms] []
[2021/06/27 03:58:48.061 -04:00] [INFO] [restore.go:1800] ["skip full compaction"]
[2021/06/27 03:58:48.061 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 03:58:48.067 -04:00] [INFO] [restore.go:1985] ["clean checkpoints start"] [keepAfterSuccess=false] [taskID=1624780727613315042]
[2021/06/27 03:58:48.067 -04:00] [INFO] [restore.go:1992] ["clean checkpoints completed"] [keepAfterSuccess=false] [taskID=1624780727613315042] [takeTime=102.189µs] []
[2021/06/27 03:58:48.067 -04:00] [INFO] [restore.go:342] ["the whole procedure completed"] [takeTime=445.476049ms] []
[2021/06/27 03:58:48.067 -04:00] [INFO] [main.go:94] ["tidb lightning exit"]
[2021/06/27 04:11:32.693 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 04:11:32.693 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 04:11:32.693 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624781492693924385,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/2406124_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 04:11:32.699 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 04:11:32.699 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=204.444µs] []
[2021/06/27 04:11:32.699 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 04:11:32.701 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 04:11:32.701 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 04:11:32.782 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 04:11:32.782 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:11:32.783 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:11:32.783 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=226.198µs]
[2021/06/27 04:11:32.783 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=253.963µs] []
[2021/06/27 04:11:32.783 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 04:11:32.783 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:11:32.783 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 04:11:32.783 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 04:11:32.783 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 04:11:32.784 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [parser.go:186] ["syntax error"] [pos=2] [content="805072019548197005105\",\"540122198904065110\",\"100145398834\",\"100145398834\",\"次仁达杰\",\"次仁达杰\",\"540122198904065110\",\"08\",\"\",\"540122198904065110-01\",\"0\",\"次仁达杰\",\"54000000\",\"54990000\",\"54819700\",\"03\",\"8D\",\"2.\",\"34\",\"M\",\"85000.0000\",\"1.4950\",\""]
[2021/06/27 04:11:32.784 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [parser.go:186] ["syntax error"] [pos=2] [content="6605072020540198001127\",\"511130197612253815\",\"200128765421\",\"200128765421\",\"西藏海诚利工程机械设备租赁有限公司\",\"西藏海诚利工程机械设备租赁有限公司\",\"511130197612253815\",\"06\",\"\",\"511130197612253815-01\",\"0\",\"西藏海诚利"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:1597] ["encode kv data and write failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=714.166µs] [error="in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:1429] ["restore engine failed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=868.6µs] [error="in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:1452] ["import whole table failed"] [table=`jan`.`risk_factor`] [takeTime=985.545µs] [error="in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:1127] ["restore table failed"] [table=`jan`.`risk_factor`] [takeTime=1.574517ms] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:1272] ["restore all tables data failed"] [takeTime=1.896389ms] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:331] ["run failed"] [step=3] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:342] ["the whole procedure failed"] [takeTime=83.320928ms] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:123] ["tables failed to be imported"] [count=1]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [restore.go:125] [-] [table=`jan`.`risk_factor`] [status=written] [error="in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"] [errorVerbose="syntax error: cannot have consecutive fields without separator\nin file jan.risk_factor.00000001.csv:0 at offset 2\nrestore table `jan`.`risk_factor` failed"]
[2021/06/27 04:11:32.784 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="restore table `jan`.`risk_factor` failed: in file jan.risk_factor.00000001.csv:0 at offset 2: syntax error: cannot have consecutive fields without separator"]
[2021/06/27 04:12:47.844 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 04:12:47.844 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist"] [errorVerbose="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist\ngithub.com/pingcap/br/pkg/lightning/config.(*Config).CheckAndAdjustFilePath\n\tgithub.com/pingcap/br@/pkg/lightning/config/config.go:735\ngithub.com/pingcap/br/pkg/lightning/config.(*Config).Adjust\n\tgithub.com/pingcap/br@/pkg/lightning/config/config.go:600\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:183\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 04:12:47.844 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist"]
[2021/06/27 04:13:09.300 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 04:13:09.301 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist"] [errorVerbose="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist\ngithub.com/pingcap/br/pkg/lightning/config.(*Config).CheckAndAdjustFilePath\n\tgithub.com/pingcap/br@/pkg/lightning/config/config.go:735\ngithub.com/pingcap/br/pkg/lightning/config.(*Config).Adjust\n\tgithub.com/pingcap/br@/pkg/lightning/config/config.go:600\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:183\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 04:13:09.301 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="/home/tidb/lightning/test/2406124_operating_dir: mydumper dir does not exist"]
[2021/06/27 04:14:37.843 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 04:14:37.843 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 04:14:37.843 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624781677843566975,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/2d700e7_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 04:14:37.850 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 04:14:37.851 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=278.209µs] []
[2021/06/27 04:14:37.851 -04:00] [ERROR] [lightning.go:311] ["restore failed"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/2d700e7_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/2406124_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"]
[2021/06/27 04:14:37.851 -04:00] [ERROR] [main.go:90] ["tidb lightning encountered error stack info"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/2d700e7_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/2406124_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"] [errorVerbose="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/2d700e7_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/2406124_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again\ngithub.com/pingcap/br/pkg/lightning/restore.verifyCheckpoint\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:710\ngithub.com/pingcap/br/pkg/lightning/restore.NewRestoreControllerWithPauser\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:212\ngithub.com/pingcap/br/pkg/lightning/restore.NewRestoreController\n\tgithub.com/pingcap/br@/pkg/lightning/restore/restore.go:187\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).run\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:309\ngithub.com/pingcap/br/pkg/lightning.(*Lightning).RunOnce\n\tgithub.com/pingcap/br@/pkg/lightning/lightning.go:192\nmain.main.func2\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:86\nmain.main\n\tgithub.com/pingcap/br@/cmd/tidb-lightning/main.go:87\nruntime.main\n\truntime/proc.go:203\nruntime.goexit\n\truntime/asm_amd64.s:1357"]
[2021/06/27 04:14:37.851 -04:00] [ERROR] [main.go:91] ["tidb lightning encountered error"] [error="config 'mydumper.data-source-dir' value 'file:///home/tidb/lightning/test/2d700e7_operating_dir' different from checkpoint value 'file:///home/tidb/lightning/test/2406124_operating_dir'. You may set 'check-requirements = false' to skip this check or delete the file '/tmp/uas_tidb_lightning_checkpoint.pb' and remove all restored tables and try again"]
[2021/06/27 04:14:51.908 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/06/27 04:14:51.909 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/06/27 04:14:51.909 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1624781691909102945,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/test/2d700e7_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/06/27 04:14:51.911 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/06/27 04:14:51.911 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=205.579µs] []
[2021/06/27 04:14:51.911 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/06/27 04:14:51.913 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/06/27 04:14:51.913 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/06/27 04:14:51.987 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/06/27 04:14:51.987 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:14:51.987 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:14:51.987 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=2] [maxRegionSize=268435456] [RegionsCount=2] [cost=45.044µs]
[2021/06/27 04:14:51.987 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`risk_factor`] [enginesCnt=2] [filesCnt=2] [takeTime=65.27µs] []
[2021/06/27 04:14:51.987 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 04:14:51.987 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`risk_factor`]
[2021/06/27 04:14:51.988 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 04:14:51.988 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`risk_factor`] [engineNumber=0]
[2021/06/27 04:14:51.988 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 04:14:51.988 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0]
[2021/06/27 04:14:51.988 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0]
[2021/06/27 04:14:52.347 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=0] [path=jan.risk_factor.00000000.csv:0] [readDur=1.149032ms] [encodeDur=624.244µs] [deliverDur=356.860639ms] [checksum="{cksum=0,size=103147,kvs=100}"] [takeTime=358.824375ms] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [fileIndex=1] [path=jan.risk_factor.00000001.csv:0] [readDur=1.263153ms] [encodeDur=623.5µs] [deliverDur=360.285367ms] [checksum="{cksum=0,size=103667,kvs=100}"] [takeTime=362.384605ms] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:1597] ["encode kv data and write completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [read=0] [written=206814] [takeTime=362.676147ms] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=664ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:1429] ["restore engine completed"] [table=`jan`.`risk_factor`] [engineNumber=0] [takeTime=362.771427ms] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [retryCnt=0] [takeTime=763ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=388ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:0] [engineUUID=72fffb7b-6dbe-59c1-8b42-2937f272de3b] [takeTime=88.316µs] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:1452] ["import whole table completed"] [table=`jan`.`risk_factor`] [takeTime=362.92537ms] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=140ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [retryCnt=0] [takeTime=372ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf]
[2021/06/27 04:14:52.350 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=103ns] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`risk_factor`:-1] [engineUUID=f9874edf-179e-5836-99a5-ad797cb95bbf] [takeTime=19.264µs] []
[2021/06/27 04:14:52.350 -04:00] [INFO] [tidb.go:366] ["alter table auto_increment start"] [table=`jan`.`risk_factor`] [auto_increment=1]
[2021/06/27 04:14:52.444 -04:00] [INFO] [tidb.go:368] ["alter table auto_increment completed"] [table=`jan`.`risk_factor`] [auto_increment=1] [takeTime=93.187417ms] []
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:1734] ["skip checksum"] [table=`jan`.`risk_factor`]
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:1772] ["skip analyze"] [table=`jan`.`risk_factor`]
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:1127] ["restore table completed"] [table=`jan`.`risk_factor`] [takeTime=456.630702ms] []
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:1272] ["restore all tables data completed"] [takeTime=456.967092ms] []
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:1800] ["skip full compaction"]
[2021/06/27 04:14:52.444 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/06/27 04:14:52.448 -04:00] [INFO] [restore.go:1985] ["clean checkpoints start"] [keepAfterSuccess=false] [taskID=1624781691909102945]
[2021/06/27 04:14:52.448 -04:00] [INFO] [restore.go:1992] ["clean checkpoints completed"] [keepAfterSuccess=false] [taskID=1624781691909102945] [takeTime=44.149µs] []
[2021/06/27 04:14:52.448 -04:00] [INFO] [restore.go:342] ["the whole procedure completed"] [takeTime=534.920277ms] []
[2021/06/27 04:14:52.448 -04:00] [INFO] [main.go:94] ["tidb lightning exit"]
