[2021/07/03 02:12:52.139 -04:00] [WARN] [config.go:483] ["currently only per-task configuration can be applied, global configuration changes can only be made on startup"] ["global config changes"="[lightning.level,lightning.file,lightning.max-size,lightning.max-days,lightning.max-backups,tidb.log-level]"]
[2021/07/03 02:12:52.139 -04:00] [INFO] [info.go:40] ["Welcome to TiDB-Lightning"] [release-version=v5.0.2] [git-hash=ecfaf2ebc0465b570ad56374b69732a3c318a3e1] [git-branch=heads/refs/tags/v5.0.2] [go-version=go1.13] [utc-build-time="2021-06-07 08:39:46"] [race-enabled=false]
[2021/07/03 02:12:52.139 -04:00] [INFO] [lightning.go:219] [cfg] [cfg="{\"id\":1625292772139734157,\"lightning\":{\"table-concurrency\":16,\"index-concurrency\":8,\"region-concurrency\":4,\"io-concurrency\":5,\"check-requirements\":true},\"tidb\":{\"host\":\"127.0.0.1\",\"port\":4000,\"user\":\"root\",\"status-port\":10080,\"pd-addr\":\"127.0.0.1:2379\",\"sql-mode\":\"ONLY_FULL_GROUP_BY,NO_ENGINE_SUBSTITUTION\",\"tls\":\"false\",\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"max-allowed-packet\":67108864,\"distsql-scan-concurrency\":100,\"build-stats-concurrency\":20,\"index-serial-scan-concurrency\":20,\"checksum-table-concurrency\":16},\"checkpoint\":{\"schema\":\"uas_tidb_lightning_checkpoint\",\"driver\":\"file\",\"enable\":true,\"keep-after-success\":false},\"mydumper\":{\"read-block-size\":65536,\"batch-size\":107374182400,\"batch-import-ratio\":0,\"data-source-dir\":\"file:///home/tidb/lightning/examples/eg_nonstanderd/test/6edfc43_operating_dir\",\"character-set\":\"auto\",\"csv\":{\"separator\":\",\",\"delimiter\":\"\\\"\",\"null\":\"\\\\N\",\"header\":false,\"trim-last-separator\":false,\"not-null\":false,\"backslash-escape\":true},\"max-region-size\":268435456,\"filter\":[\"*.*\",\"!mysql.*\",\"!sys.*\",\"!INFORMATION_SCHEMA.*\",\"!PERFORMANCE_SCHEMA.*\",\"!METRICS_SCHEMA.*\",\"!INSPECTION_SCHEMA.*\"],\"files\":null,\"no-schema\":true,\"case-sensitive\":false,\"strict-format\":false,\"default-file-rules\":true},\"tikv-importer\":{\"addr\":\"\",\"backend\":\"tidb\",\"on-duplicate\":\"replace\",\"max-kv-pairs\":4096,\"send-kv-pairs\":32768,\"region-split-size\":100663296,\"sorted-kv-dir\":\"\",\"disk-quota\":0,\"range-concurrency\":0,\"engine-mem-cache-size\":536870912,\"local-writer-mem-cache-size\":134217728},\"post-restore\":{\"checksum\":\"off\",\"analyze\":\"off\",\"level-1-compact\":false,\"post-process-at-last\":true,\"compact\":false},\"cron\":{\"switch-mode\":\"5m0s\",\"log-progress\":\"5m0s\",\"check-disk-quota\":\"0s\"},\"routes\":null,\"security\":{\"ca-path\":\"\",\"cert-path\":\"\",\"key-path\":\"\",\"redact-info-log\":false},\"black-white-list\":{\"do-tables\":null,\"do-dbs\":null,\"ignore-tables\":null,\"ignore-dbs\":null}}"]
[2021/07/03 02:12:52.147 -04:00] [INFO] [lightning.go:286] ["load data source start"]
[2021/07/03 02:12:52.147 -04:00] [INFO] [lightning.go:289] ["load data source completed"] [takeTime=252.877µs] []
[2021/07/03 02:12:52.147 -04:00] [INFO] [checkpoints.go:954] ["open checkpoint file failed, going to create a new one"] [path=/tmp/uas_tidb_lightning_checkpoint.pb] [error="open /tmp/uas_tidb_lightning_checkpoint.pb: no such file or directory"]
[2021/07/03 02:12:52.149 -04:00] [INFO] [restore.go:312] ["the whole procedure start"]
[2021/07/03 02:12:52.149 -04:00] [INFO] [tidb.go:336] ["skipping check requirements for tidb backend"]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:1066] ["restore all tables data start"]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:1123] ["restore table start"] [table=`jan`.`TiChange_test`]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:2103] ["load engines and files start"] [table=`jan`.`TiChange_test`]
[2021/07/03 02:12:52.247 -04:00] [INFO] [region.go:228] [makeTableRegions] [filesCount=1] [maxRegionSize=268435456] [RegionsCount=1] [cost=66.161µs]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:2141] ["load engines and files completed"] [table=`jan`.`TiChange_test`] [enginesCnt=2] [filesCnt=1] [takeTime=100.594µs] []
[2021/07/03 02:12:52.247 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:1377] ["import whole table start"] [table=`jan`.`TiChange_test`]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:1427] ["restore engine start"] [table=`jan`.`TiChange_test`] [engineNumber=0]
[2021/07/03 02:12:52.247 -04:00] [INFO] [restore.go:1509] ["encode kv data and write start"] [table=`jan`.`TiChange_test`] [engineNumber=0]
[2021/07/03 02:12:52.247 -04:00] [INFO] [backend.go:307] ["open engine"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417]
[2021/07/03 02:12:52.248 -04:00] [INFO] [restore.go:2636] ["restore file start"] [table=`jan`.`TiChange_test`] [engineNumber=0] [fileIndex=0] [path=jan.TiChange_test.00000000.csv:0]
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:2646] ["restore file completed"] [table=`jan`.`TiChange_test`] [engineNumber=0] [fileIndex=0] [path=jan.TiChange_test.00000000.csv:0] [readDur=97.837µs] [encodeDur=29.259µs] [deliverDur=5.670511ms] [checksum="{cksum=0,size=27,kvs=1}"] [takeTime=6.003279ms] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:1597] ["encode kv data and write completed"] [table=`jan`.`TiChange_test`] [engineNumber=0] [read=0] [written=27] [takeTime=6.969451ms] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417]
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417] [takeTime=519ns] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:1429] ["restore engine completed"] [table=`jan`.`TiChange_test`] [engineNumber=0] [takeTime=7.040216ms] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417]
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417] [retryCnt=0]
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417] [retryCnt=0] [takeTime=654ns] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417]
[2021/07/03 02:12:52.254 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417] [takeTime=133ns] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`TiChange_test`:0] [engineUUID=15a182ce-826f-56b1-8a15-b87ba9487417] [takeTime=26.1µs] []
[2021/07/03 02:12:52.254 -04:00] [INFO] [restore.go:1452] ["import whole table completed"] [table=`jan`.`TiChange_test`] [takeTime=7.150321ms] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:384] ["engine close start"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098]
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:386] ["engine close completed"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098] [takeTime=367ns] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:2266] ["import and cleanup engine start"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098]
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:398] ["import start"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098] [retryCnt=0]
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:401] ["import completed"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098] [retryCnt=0] [takeTime=670ns] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:413] ["cleanup start"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098]
[2021/07/03 02:12:52.255 -04:00] [INFO] [backend.go:415] ["cleanup completed"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098] [takeTime=428ns] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:2274] ["import and cleanup engine completed"] [engineTag=`jan`.`TiChange_test`:-1] [engineUUID=bc474a8d-1210-5264-9c53-5282d9399098] [takeTime=64.692µs] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:1734] ["skip checksum"] [table=`jan`.`TiChange_test`]
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:1772] ["skip analyze"] [table=`jan`.`TiChange_test`]
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:1127] ["restore table completed"] [table=`jan`.`TiChange_test`] [takeTime=7.885212ms] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:1272] ["restore all tables data completed"] [takeTime=8.175599ms] []
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:1800] ["skip full compaction"]
[2021/07/03 02:12:52.255 -04:00] [INFO] [restore.go:961] ["everything imported, stopping periodic actions"]
[2021/07/03 02:12:52.260 -04:00] [INFO] [restore.go:1985] ["clean checkpoints start"] [keepAfterSuccess=false] [taskID=1625292772139734157]
[2021/07/03 02:12:52.260 -04:00] [INFO] [restore.go:1992] ["clean checkpoints completed"] [keepAfterSuccess=false] [taskID=1625292772139734157] [takeTime=58.675µs] []
[2021/07/03 02:12:52.260 -04:00] [INFO] [restore.go:342] ["the whole procedure completed"] [takeTime=110.884936ms] []
[2021/07/03 02:12:52.260 -04:00] [INFO] [main.go:94] ["tidb lightning exit"]
